# Set one (or none) of the following to 1 to set the CMake options for
# compiling meta.   Changes must also be made to the localMetaConfiguration.h
# file.
SET(METAIO_FOR_VTK 0)
SET(METAIO_FOR_ITK 1)

# Based on above options, choose a project/library name
IF(METAIO_FOR_VTK)
  SET(METAIO_NAMESPACE "vtkmetaio")
ELSE(METAIO_FOR_VTK)
  IF(METAIO_FOR_ITK)
    SET(METAIO_NAMESPACE "ITKMetaIO")
  ELSE(METAIO_FOR_ITK)
    SET(METAIO_NAMESPACE "kwMetaIO")
  ENDIF(METAIO_FOR_ITK)
ENDIF(METAIO_FOR_VTK)

PROJECT( ${METAIO_NAMESPACE} )

INCLUDE_DIRECTORIES(${${METAIO_NAMESPACE}_SOURCE_DIR})

ADD_LIBRARY(${METAIO_NAMESPACE}
  metaArrow.cxx
  metaBlob.cxx
  metaCommand.h
  metaCommand.cxx
  metaContour.h
  metaContour.cxx
  metaDTITube.cxx
  metaEllipse.cxx
  metaGroup.cxx
  metaGaussian.cxx
  metaImage.cxx
  metaImageUtils.cxx
  metaLandmark.cxx
  metaLine.cxx
  metaMesh.cxx
  metaMesh.h
  metaObject.cxx
  metaScene.cxx
  metaSurface.cxx
  metaTube.cxx
  metaTypes.h
  metaUtils.cxx
  metaVesselTube.cxx
  metaTransform.cxx
  metaTubeGraph.cxx
)

INCLUDE_REGULAR_EXPRESSION("^.*$")

IF(METAIO_FOR_VTK)
  IF(BUILD_SHARED_LIBS)
    ADD_DEFINITIONS(-Dvtkmetaio_BUILD_SHARED_LIBS)
  ENDIF(BUILD_SHARED_LIBS)
  INCLUDE_DIRECTORIES(${VTKZLIB_SOURCE_DIR})
  TARGET_LINK_LIBRARIES(${METAIO_NAMESPACE} ${VTK_ZLIB_LIBRARIES})
  IF(VTK_LIBRARY_PROPERTIES)
    SET_TARGET_PROPERTIES(${METAIO_NAMESPACE} 
                          PROPERTIES ${VTK_LIBRARY_PROPERTIES})
  ENDIF(VTK_LIBRARY_PROPERTIES)
ELSE(METAIO_FOR_VTK)
  IF(METAIO_FOR_ITK)
    INCLUDE_DIRECTORIES(${ITK_ZLIB_SOURCE_DIR})
    TARGET_LINK_LIBRARIES(${METAIO_NAMESPACE} ${ITK_ZLIB_LIBRARIES})
    IF(ITK_LIBRARY_PROPERTIES)
      SET_TARGET_PROPERTIES(${METAIO_NAMESPACE} 
                            PROPERTIES ${ITK_LIBRARY_PROPERTIES})
    ENDIF(ITK_LIBRARY_PROPERTIES)
  ELSE(METAIO_FOR_ITK)
    INCLUDE_DIRECTORIES(${ZLIB_SOURCE_DIR})
    TARGET_LINK_LIBRARIES(${METAIO_NAMESPACE} ${ZLIB_LIBRARIES})
  ENDIF(METAIO_FOR_ITK)
ENDIF(METAIO_FOR_VTK)

#SUBDIRS(tests)

IF(METAIO_FOR_VTK)
  IF(NOT VTK_INSTALL_NO_LIBRARIES)
    INSTALL_TARGETS(${VTK_INSTALL_LIB_DIR} ${METAIO_NAMESPACE})
  ENDIF(NOT VTK_INSTALL_NO_LIBRARIES)
  IF(NOT VTK_INSTALL_NO_DEVELOPMENT)
    INSTALL_FILES(${VTK_INSTALL_INCLUDE_DIR}/${METAIO_NAMESPACE} "(\\.h)$")
  ENDIF(NOT VTK_INSTALL_NO_DEVELOPMENT)
ELSE(METAIO_FOR_VTK)
  IF(METAIO_FOR_ITK)
    IF(NOT ITK_INSTALL_NO_LIBRARIES)
      INSTALL_TARGETS(${ITK_INSTALL_LIB_DIR}
                      RUNTIME_DIRECTORY ${ITK_INSTALL_BIN_DIR}
                      ${METAIO_NAMESPACE})
    ENDIF(NOT ITK_INSTALL_NO_LIBRARIES)
    IF(NOT ITK_INSTALL_NO_DEVELOPMENT)
      INSTALL_FILES(${ITK_INSTALL_INCLUDE_DIR}/Utilities/${METAIO_NAMESPACE}
                    "(\\.h)$")
    ENDIF(NOT ITK_INSTALL_NO_DEVELOPMENT)
  ELSE(METAIO_FOR_ITK)
    TARGET_LINK_LIBRARIES(ITKMetaIO ${ZLIB_LIBRARIES})
    INSTALL_TARGETS(${INSTALL_LIB_DIR} ${METAIO_NAMESPACE})
    INSTALL_FILES(${INSTALL_INCLUDE_DIR}/kwMetaIO "(\\.h)$")
  ENDIF(METAIO_FOR_ITK)
ENDIF(METAIO_FOR_VTK)


